\section{Preliminary Design}
    % To our knowledge, our work is the first large-scale FL deployment on real-world user devices that will aid evaluations for academic purposes.

    \subsection{Android Application}
    %     \begin{enumerate}
    %         \item Frontend
    %         \item Data Cache
    %         \item Prediction Model
    %         \newline
    %     \end{enumerate}

        \textbf{Personalized Chatbot}
        Our application in target will be a specific University dedicated chatbot which handles a user's questions related to Graduate and Undergraduate level applications and academic assistance. Essentially our user will interact with our chatbot over a mobile application, where question will be provided as input. The question will be given as an input to our Deep Neural Network model on the user's device which will then produce an output as answer.~\cite{9225395} We will require user to provides us with the feedback for the query related answer, to improve the model. Our application will perform some pre-processing and then cache each question and answer pair with the feedback given, to later allow for the model to be trained on the device.\newline

        \textbf{Prompt Recommendation System}
        The purpose of this application is to improve the user's search experience. It utilizes 
        APIs from leading search engines such as Google or Microsoft Edge to track the user's 
        search patterns. The application can determine whether the user was satisfied with the 
        search result or not by analyzing their re-attempts with modified queries, which will be 
        provided by the API integrated into the application. The model will continually learn from 
        the user's search patterns and provide the most relevant prompts based on the main 
        category of their query. \newline

        \textbf{Challenges}
        The target audience for our applications consists primarily of low-end smartphone 
        users, who are likely to have limited access to an unmetered network.~\cite{10.1504/IJMC.2005.006583} The training 
        of models on these devices may be hindered by restrictions imposed by the federated 
        learning model, such as requiring the device to be idle and charged. Additionally, the 
        chatbot application requires frequent interaction from users in the form of questions and 
        feedback, which may not be feasible for all users, especially those outside of academia. 
        The limited RAM on low-end smartphones may also result in the operating system 
        interrupting background processes, causing delays or disconnection from the central 
        server. The Prompt Recommendation System may also encounter limitations with APIs 
        in terms of data access and rate, which can negatively impact the storage and user 
        experience of the application.
    
        \subsection{FL Platform}
        The platform will enable model training on user devices using the data generated by application use.
        \textbf{Client Runtime}
            \begin{itemize}
                \item Model Training
                \item Device Analytics \newline
                    No personally identifiable information will be logged.  
                    \begin{itemize}
                        \item Logs
                        \item Device OS
                        \item Device Model
                        \item Device State
                        \item Training time
                        \item Memory profile
                        \item Battery profile
                    \end{itemize}
            \end{itemize}
        \textbf{Server Runtime}
    \subsection{Coordination Layer}
        This layer will be responsible for tackling practical deployment issues at scale. For example, device execution may be interrupted, resource utilization may be ineffective, or device connectivity could be unreliable. \newline \newline
        \textbf{Device Management} The selection and reporting of devices for FL tasks are part of device management. In order to make the device management process inclusive, we add functionality to the mechanism described in~\cite{DBLP:journals/corr/abs-1902-01046}. Devices that meet the eligibility requirements check in with the server for any FL tasks that are open as part of the selection process. After allocating the FL tasks to available devices, the server waits for participants to report updates. To signal the end of a round, the server uses a goal counter and timer. The goal count is split into two quorums, one for high-end devices and the other for low-end devices, both of equal size. The round is marked complete if the goal count is achieved within the timeout value else the round is discarded. 
        \newline \newline
        \textbf{Failure Detection} The device is declared failed if it violates the eligibility criteria during a FL round (unmetered connection, plugged in, idle). During the FL round, the failure is detected using the ping and ack mechanism between the server and the device. This aids the server in keeping track of active participants of a FL round.
            